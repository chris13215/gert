ğŸ“‹ AI Webchat Canvas Transformation Plan
Current State Analysis
Your app is a React + TypeScript AI chat interface using:

Tech Stack: Vite, React 18, TypeScript, Tailwind CSS, Lucide icons
AI Integration: Puter SDK supporting multiple models (Claude Opus 4.5, GPT 5.2, Grok 3, Gemini, etc.)
Key Features: File attachments, markdown rendering, streaming responses, code syntax highlighting
Current Theme: Dark (#131314 bg) with indigo accent (#6366f1)
ğŸ¨ Proposed Transformation
1. Visual Design Overhaul
Color Palette Enhancement
Current Theme â†’ New Vibrant Theme

Background Layers:
â€¢ Main BG: #131314 â†’ #0a0a0f (Deeper, richer)
â€¢ Panel BG: #1e1f20 â†’ #13141b (Subtle purple tint)
â€¢ Surface: #28292a â†’ #1a1b26 (Cooler tone)

Accent Colors (Vibrant Purples/Blues):
â€¢ Primary: #6366f1 â†’ #7c3aed (Vivid purple)
â€¢ Secondary: #7f84ff â†’ #a78bfa (Bright lavender)
â€¢ Tertiary: New â†’ #3b82f6 (Electric blue)
â€¢ Glow Effects: Linear gradients (purpleâ†’blue)

Text Colors:
â€¢ Primary: #e3e3e3 â†’ #f8f9fa (Brighter)
â€¢ Secondary: #9da0a5 â†’ #a1a1aa (Neutral zinc)
â€¢ Accent Text: New â†’ #c4b5fd (Soft purple)
Modern UI Elements
Glassmorphism effects on panels (backdrop-blur with semi-transparent backgrounds)
Gradient borders with purple-to-blue transitions
Animated glows on interactive elements
Smooth micro-interactions (hover states, button ripples)
Floating shadows with purple/blue hues instead of gray
Neon accent lines for visual hierarchy
2. Canvas/Artifacts System (Claude AI-style)
Architecture
ChatInterface (Parent)
â”œâ”€â”€ MessagesPanel (Left/Full) - 60% width when canvas open
â””â”€â”€ CanvasPanel (Right) - 40% width, slides in from right
    â”œâ”€â”€ CanvasHeader (Title, Actions, Close Button)
    â”œâ”€â”€ CanvasContent (Code/Preview)
    â”‚   â”œâ”€â”€ CodeEditor (Read-only, syntax highlighted)
    â”‚   â””â”€â”€ PreviewFrame (Live HTML/CSS/JS preview)
    â””â”€â”€ CanvasFooter (Copy, Download, Open in New Tab)
Features
Auto-Detection System
Code Detection Logic:
1. Parse assistant messages for code blocks (```language)
2. Detect supported languages: 
   - HTML, CSS, JavaScript, TypeScript, React, Vue
   - Python, Java, C++, etc.
3. Extract code + metadata (language, filename if present)
4. Auto-open canvas when code detected
5. If multiple code blocks â†’ show tabs in canvas
Canvas States
Closed: Full-width chat (100%)
Opening Animation: Slide-in from right (300ms ease-out-cubic)
Open: Split view - Chat (60%) + Canvas (40%)
Closing Animation: Slide-out to right (200ms ease-in-cubic)
Canvas Components
Header Section:

File icon + detected language badge
Title: "Generated Code" or parsed filename
Action buttons: Copy, Download, Open in New Window
Close button (X)
Content Section:

Code View (Default):

Syntax highlighting using Prism.js or highlight.js
Line numbers
Copy button per block
Theme: Matches app dark purple theme
Preview Mode (For web code):

Toggle button: "Code" | "Preview"
Live rendering in sandboxed iframe
Only for HTML/CSS/JS/React code
Error boundaries for safety
Footer Section:

Language/file type indicator
Line count
Character count
Last updated timestamp
Manual Controls
Toggle Button in Chat:

Position: Top-right of chat header (next to model name)
Icon: <Code2> from Lucide
Label: "Canvas" with badge showing code block count
State: Disabled when no code, Active when code available
Keyboard Shortcuts:

Ctrl/Cmd + K â†’ Toggle canvas
Ctrl/Cmd + Shift + C â†’ Copy code from canvas
3. Enhanced Chat Interface
Message Bubbles
User Messages: Gradient background (purple â†’ blue)
Assistant Messages: Glass effect with subtle border glow
Code Blocks in Chat:
Compact preview (5 lines max)
"View in Canvas" button overlay
Click â†’ opens canvas with full code
Input Area
Floating design with elevation shadow
Glow effect when focused (purple/blue)
Enhanced file attachment UI:
Preview thumbnails with glass effect
Drag zone with animated border
Model Selection Grid
Card Redesign:
Gradient borders on hover
Animated icon with glow
Category badge with glass effect
Smooth scale transform (1.0 â†’ 1.03)
4. Technical Implementation Plan
Phase 1: Theme & Style Foundation (Files to modify)
/app/src/index.css â†’ Complete CSS overhaul
- New CSS variables for vibrant theme
- Glassmorphism utilities
- Animation keyframes
- Gradient definitions

/app/tailwind.config.js â†’ Extend with custom colors
- Purple/blue gradient palette
- Shadow utilities with color
- Blur utilities
Phase 2: Canvas Component (New files to create)
/app/src/components/Canvas/
â”œâ”€â”€ Canvas.tsx (Main container)
â”œâ”€â”€ CanvasHeader.tsx (Top bar with controls)
â”œâ”€â”€ CanvasContent.tsx (Code/Preview display)
â”œâ”€â”€ CanvasFooter.tsx (Info bar)
â”œâ”€â”€ CodeBlock.tsx (Syntax highlighted code)
â”œâ”€â”€ PreviewFrame.tsx (Live preview iframe)
â””â”€â”€ canvas.types.ts (TypeScript interfaces)
Phase 3: Integration (Files to modify)
/app/src/components/ChatInterface.tsx
- Add canvas state management
- Implement code detection logic
- Add canvas toggle controls
- Split layout system (60/40)
- Handle resize animations

/app/src/types.ts
- Add Canvas-related types
- CodeBlock interface
- CanvasState interface
Phase 4: Visual Enhancements (Files to modify)
/app/src/components/ModelGrid.tsx
- Apply new theme colors
- Add glassmorphism effects
- Enhanced hover animations

/app/src/App.tsx
- Update overall theme provider
- Add canvas context if needed
5. Code Detection Algorithm
// Pseudo-code for detection logic
function detectCodeInMessage(content: string) {
  const codeBlockRegex = /```(\w+)?\n([\s\S]+?)```/g;
  const matches = [...content.matchAll(codeBlockRegex)];
  
  return matches.map(match => ({
    language: match[1] || 'plaintext',
    code: match[2].trim(),
    id: generateId(),
    canPreview: ['html', 'javascript', 'typescript', 'jsx', 'tsx'].includes(match[1])
  }));
}

// Auto-open logic
useEffect(() => {
  if (newCodeDetected && !canvasOpen) {
    openCanvas();
  }
}, [messages]);
6. Dependencies to Add
{
  "prismjs": "^1.29.0",           // Syntax highlighting
  "react-syntax-highlighter": "^15.5.0", // Alternative
  "framer-motion": "^10.16.0",    // Smooth animations
  "zustand": "^4.4.0"             // Optional: Canvas state management
}
7. Animation & Interaction Details
Canvas Animations
Open: Slide from right (0 â†’ 40% width) + fade in (0 â†’ 1 opacity)
Close: Slide to right + fade out
Duration: 300ms with ease-out-cubic
Content: Stagger animation for header, content, footer (50ms delay each)
UI Micro-interactions
Buttons: Ripple effect on click (expanding circle)
Code blocks: Pulse glow on copy
Canvas toggle: Rotate icon 360Â° on open/close
Tabs: Slide indicator bar (if multiple code blocks)
8. Responsive Behavior
Desktop (> 1024px)
Split view: Chat 60% + Canvas 40%
Canvas always on right
Tablet (768px - 1024px)
Split view: Chat 50% + Canvas 50%
Smaller fonts, compact spacing
Mobile (< 768px)
Full-screen toggle: Canvas overlays chat (100% width)
Swipe gestures to close canvas
Floating "Code" button in chat
9. Preview Capabilities
Web Code Preview
Sandboxed <iframe> with sandbox attribute
Inject HTML/CSS/JS dynamically
Error handling with try-catch
Console message forwarding (optional)
Preview Features
Toggle between Code and Preview
Responsive preview (desktop/mobile widths)
Refresh button
Open in new tab option
10. File Structure After Implementation
/app/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Canvas/
â”‚   â”‚   â”œâ”€â”€ Canvas.tsx âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ CanvasHeader.tsx âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ CanvasContent.tsx âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ CanvasFooter.tsx âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ CodeBlock.tsx âœ¨ NEW
â”‚   â”‚   â”œâ”€â”€ PreviewFrame.tsx âœ¨ NEW
â”‚   â”‚   â””â”€â”€ canvas.types.ts âœ¨ NEW
â”‚   â”œâ”€â”€ ChatInterface.tsx (MODIFIED - canvas integration)
â”‚   â””â”€â”€ ModelGrid.tsx (MODIFIED - visual refresh)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCanvas.ts âœ¨ NEW (canvas state logic)
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ codeDetector.ts âœ¨ NEW (detection algorithms)
â”œâ”€â”€ App.tsx (MODIFIED)
â”œâ”€â”€ index.css (MODIFIED - complete theme overhaul)
â””â”€â”€ types.ts (MODIFIED)
11. Key Visual Mockup (Text Description)
Chat Interface with Canvas Open:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â†]  Claude Opus 4.5  [Canvas 1] ğŸŒ                    â”‚ Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚                    â”‚
â”‚  [User bubble - gradient]           â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  "Create a React button"            â”‚  â•‘ Canvas       â•‘ â”‚
â”‚                                     â”‚  â•‘ [Copy][â¤¢][X] â•‘ â”‚
â”‚  [Assistant bubble - glass]         â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  "Here's a React button..."         â”‚  â•‘              â•‘ â”‚
â”‚                                     â”‚  â•‘  ```tsx      â•‘ â”‚
â”‚  ```tsx                             â”‚  â•‘  function... â•‘ â”‚
â”‚  function Butto...  [Viewâ†’Canvas]   â”‚  â•‘  ...         â•‘ â”‚
â”‚  ```                                â”‚  â•‘              â•‘ â”‚
â”‚                                     â”‚  â•‘  [Code|Preview]â•‘
â”‚  [User message]                     â”‚  â•‘              â•‘ â”‚
â”‚  [Assistant response streaming...]  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                     â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“] [Type message...]      [Send] â”‚                    â”‚ Input
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     60% Chat Width                      40% Canvas Width
12. Success Criteria
âœ… Visual Excellence:

Vibrant purple/blue theme applied throughout
Glassmorphism effects on all panels
Smooth animations (60fps)
Professional, modern aesthetic
âœ… Canvas Functionality:

Auto-opens when code detected
Manual toggle works smoothly
Code syntax highlighting perfect
Preview mode for web code works
Multiple code blocks handled (tabs)
âœ… User Experience:

Intuitive controls
Responsive on all devices
Fast performance (no lag)
Accessible (keyboard navigation)
